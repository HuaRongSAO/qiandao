<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <script>
    (function(doc, win) {
        var docEl = doc.documentElement,
            resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
            recalc = function() {
                var clientWidth = docEl.clientWidth;
                if (!clientWidth) return;
                docEl.style.fontSize = 10 * (clientWidth / 320) + 'px';
            };
        if (!doc.addEventListener) return;
        win.addEventListener(resizeEvt, recalc, false);
        doc.addEventListener('DOMContentLoaded', recalc, false);
    })(document, window);
    </script>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="format-detection" content="telephone=no">
    <title>课程</title>
    <!-- <link rel="alternate icon" type="image/png" href="assets/i/favicon.png"> -->
    <link rel="stylesheet" href="libs/reset.css">
    <link rel="stylesheet" href="libs/bootstrap.min.css">
    <link rel="stylesheet" href="css/article.css">

</head>

<body>
    <header>
        <div class="logo"></div>
        <div id="user">
            <div class="login">登 录</div>
            <div class="greeting">
                <span id="username">???</span>，欢迎你！
                <span class="logout">退 出</span>
            </div>
        </div>
    </header>
    <div class="container">
        <h1>二甲双胍：让你也可以活到120岁的“长生药”</h1>
        <p class="tips">
            温馨提示：本课程将于
            <span id="endDate">2017-01-22 24:00:00</span> 结束,逾期将不记录学习，请即时完成！
        </p>
        <p class="article">文章描述文章描述文章描述文章描述文章描述文章描述文章描述文章描述文章描述文章描述文章描述文章描述文章描述文章描述文章描述文章描述文章描述文章描述文章描述文章描述文章描述文章描述文章描述文章描述文章描述文章描述</p>
        <div class="tab">
            <div class="item active">课程内容</div>
            <div class="item">查看完成情况</div>
        </div>
        <!-- 内容 -->
        <div class="block">
            <!-- video -->
            <div>
                <video width="100%" height="auto" preload="metadata" controls>
                    <source src="video/movie.mp4" type="video/mp4">
                    <!-- <source src="movie.ogg" type="video/ogg"> 您的浏览器不支持观看此视频。 -->
                </video>
                <a class="download" download="(xxx).mp4" href="video/movie.mp4">下载此视频</a>
            </div>
            <!-- pdf -->
            <div>
                <a id="preview" href="preview/viewer.html">
                    <span>点击预览课件</span>
                </a>
                <a class="download" download="(xxx).pdf" href="preview/sources/pdfTest.pdf">下载此pdf文件</a>
            </div>
            <div class="complete">
                <span>点击确认后即完成</span>
                <div class="btn btn-danger btn-block btn-lg">已完成观看，请点此确认</div>
                <i></i>
            </div>
        </div>
        <table class="block table table-striped table-bordered">
            <thead>
                <tr>
                    <th>用户名</th>
                    <th>完成日期</th>
                    <th>状态</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>用户名</td>
                    <td>2017-01-20</td>
                    <td class="false">未完成</td>
                </tr>
                <tr>
                    <td>用户名</td>
                    <td>2017-01-20</td>
                    <td class="false">未完成</td>
                </tr>
                <tr>
                    <td>用户名</td>
                    <td>2017-01-20</td>
                    <td class="false">未完成</td>
                </tr>
                <tr>
                    <td>用户名</td>
                    <td>2017-01-20</td>
                    <td>已完成</td>
                </tr>
                <tr>
                    <td>用户名</td>
                    <td>2017-01-20</td>
                    <td>已完成</td>
                </tr>
            </tbody>
        </table>
    </div>
    <!-- 登录弹窗 -->
    <div class="dialog">
        <div class="box">
            <p class="title">登 陆</p>
            <hr>
            <div class="form-group">
                <label for="username">用户名：</label>
                <input type="text" class="form-control" name="account" id="account" placeholder="请输入账号">
            </div>
            <div class="form-group">
                <label for="password">密码：</label>
                <input type="password" class="form-control" name="password" id="password" placeholder="请输入密码">
            </div>
            <p class="wrong">
                <span>xx</span>错误！请重新输入
            </p>
            <button class="btn btn-success btn-lg signin">登 陆</button>
            <button class="btn btn-default btn-lg cancle shutdown">取消</button>
            <i class="shutdown"></i>
        </div>
    </div>
    <script src="/website/libs/zepto.min.js"></script>
    <script>
    $(function() {
        // fastclick
        FastClick.attach(document.body);

        // 登陆弹窗
        $('.login').on('click', function() {
            // 验证是否已登陆
            // 未登陆
            $('.dialog').show();

            // 登陆成功
            $(this).hide();
            $('.greeting').show();
            // 登陆成功是否重载页面
            // location.reload();
        });

        // 退出
        $('.logout').on('click', function() {
            $('.greeting').hide();
            $('.login').show();
        });

        // 切换
        $('.item').on('click', function() {
            var index = $(this).index();

            $('.item').removeClass('active');
            $(this).addClass('active');

            // 内容切换
            $('.block').hide();
            if (index === 1) {
                /* 未登录弹窗 */

                /* 已登录且成功*/
                $('table').css('display', 'table');
            } else {
                $('.block').eq(0).show();
            }
        });

        // 文件下载.    *需要后台
        /*(function() {
            function downloadFile(fileName, content) {
                var aLink = document.createElement('a');
                var blob = new Blob([content]);
                var evt = document.createEvent("HTMLEvents");
                evt.initEvent("click", false, false);
                aLink.download = fileName;
                aLink.href = URL.createObjectURL(blob);
                aLink.dispatchEvent(evt);
            };

            downloadFile();
        })();*/

        // 已完成
        (function() {
            var isFinish = false;
            $('.btn-danger').on('click', function() {
                if (isFinish) return;
                // ajax成功
                $(this).removeClass('btn-danger').addClass('btn-default active').text('已完成该课程');
                $('.complete i').show();
                isFinish = true;

                // ajax失败
                // ...
            })
        })();

        // 关闭登陆窗
        $('.dialog').on('click', '.shutdown', function() {
            $('#password').val('');
            $('.dialog').hide();
        }).on('touchmove', function(event) {
            // 阻止默认滚动
            event.preventDefault();
        });

        // 
    })
    </script>
</body>

</html>
